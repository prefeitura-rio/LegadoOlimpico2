function Xe(e,n=document){return typeof e=="string"?Array.from(n.querySelectorAll(e)):e instanceof Element?[e]:e instanceof NodeList?Array.from(e):e instanceof Array?e:[]}function Ue(e){const n=document.createElement("div");n.className=`scrollama__debug-step ${e}`,n.style.position="fixed",n.style.left="0",n.style.width="100%",n.style.zIndex="9999",n.style.borderTop="2px solid black",n.style.borderBottom="2px solid black";const t=document.createElement("p");return t.style.position="absolute",t.style.left="0",t.style.height="1px",t.style.width="100%",t.style.borderTop="1px dashed black",n.appendChild(t),document.body.appendChild(n),n}function Ze({id:e,step:n,marginTop:t}){const{index:r,height:i}=n,a=`scrollama__debug-step--${e}-${r}`;let o=document.querySelector(`.${a}`);o||(o=Ue(a)),o.style.top=`${t*-1}px`,o.style.height=`${i}px`,o.querySelector("p").style.top=`${i/2}px`}function Je(){const e="abcdefghijklmnopqrstuvwxyz",n=Date.now(),t=[];for(let r=0;r<6;r+=1){const i=e[Math.floor(Math.random()*e.length)];t.push(i)}return`${t.join("")}${n}`}function Q(e){console.error(`scrollama error: ${e}`)}function Y(e){return+e.getAttribute("data-scrollama-index")}function Ke(e,n){const t=Math.ceil(e/n),r=[],i=1/t;for(let a=0;a<t+1;a+=1)r.push(a*i);return r}function se(e){if(typeof e=="string"&&e.indexOf("px")>0){const n=+e.replace("px","");return isNaN(n)?(err("offset value must be in 'px' format. Fallback to 0.5."),{format:"percent",value:.5}):{format:"pixels",value:n}}else if(typeof e=="number"||!isNaN(+e))return e>1&&err("offset value is greater than 1. Fallback to 1."),e<0&&err("offset value is lower than 0. Fallback to 0."),{format:"percent",value:Math.min(Math.max(0,e),1)};return null}function Qe(e){e.forEach(n=>n.node.setAttribute("data-scrollama-index",n.index))}function We(e){const{top:n}=e.getBoundingClientRect(),t=window.pageYOffset,r=document.body.clientTop||0;return n+t-r}let T,W,P;function Ne(e){const n=e?e.scrollTop:window.pageYOffset;T!==n&&(T=n,T>W?P="down":T<W&&(P="up"),W=T)}function en(e){T=0,W=0,document.addEventListener("scroll",()=>Ne(e))}function et(){let e={},n=Je(),t=[],r,i,a,o=0,f=!1,u=!1,c=!1,l=!1,h=[];function m(){e={stepEnter:()=>{},stepExit:()=>{},stepProgress:()=>{}},h=[]}function k(s){s&&!f&&S(),!s&&f&&M(),f=s}function v(s,p){const g=Y(s),b=t[g];p!==void 0&&(b.progress=p);const y={element:s,index:g,progress:p,direction:P};b.state==="enter"&&e.stepProgress(y)}function O(s,p=!0){const g=Y(s),b=t[g],y={element:s,index:g,direction:P};b.direction=P,b.state="enter",h[g]||e.stepEnter(y),l&&(h[g]=!0)}function R(s,p=!0){const g=Y(s),b=t[g];if(!b.state)return!1;const y={element:s,index:g,direction:P};u&&(P==="down"&&b.progress<1?v(s,1):P==="up"&&b.progress>0&&v(s,0)),b.direction=P,b.state="exit",e.stepExit(y)}function q([s]){const p=Y(s.target),g=t[p],b=s.target.offsetHeight;b!==g.height&&(g.height=b,_(g),B(g),Z(g))}function L([s]){Ne(i);const{isIntersecting:p,target:g}=s;p?O(g):R(g)}function A([s]){const p=Y(s.target),g=t[p],{isIntersecting:b,intersectionRatio:y,target:w}=s;b&&g.state==="enter"&&v(w,y)}function _({observers:s}){Object.keys(s).map(p=>{s[p].disconnect()})}function M(){t.forEach(_)}function Z(s){const p=new ResizeObserver(q);p.observe(s.node),s.observers.resize=p}function ae(){t.forEach(Z)}function B(s){const p=window.innerHeight,g=s.offset||r,b=g.format==="pixels"?1:p,y=g.value*b,w=s.height/2-y,j=s.height/2-(p-y),I={rootMargin:`${w}px 0px ${j}px 0px`,threshold:.5,root:a},ve=new IntersectionObserver(L,I);ve.observe(s.node),s.observers.step=ve,c&&Ze({id:n,step:s,marginTop:w,marginBottom:j})}function fe(){t.forEach(B)}function J(s){const p=window.innerHeight,g=s.offset||r,b=g.format==="pixels"?1:p,y=g.value*b,w=-y+s.height,j=y-p,D=`${w}px 0px ${j}px 0px`,K=Ke(s.height,o),z={rootMargin:D,threshold:K},I=new IntersectionObserver(A,z);I.observe(s.node),s.observers.progress=I}function d(){t.forEach(J)}function S(){M(),ae(),fe(),u&&d()}const x={};return x.setup=({step:s,parent:p,offset:g=.5,threshold:b=4,progress:y=!1,once:w=!1,debug:j=!1,container:D=void 0,root:K=null})=>(en(D),t=Xe(s,p).map((z,I)=>({index:I,direction:void 0,height:z.offsetHeight,node:z,observers:{},offset:se(z.dataset.offset),top:We(z),progress:0,state:void 0})),t.length?(u=y,l=w,c=j,o=Math.max(1,+b),r=se(g),i=D,a=K,m(),Qe(t),k(!0),x):(Q("no step elements"),x)),x.enable=()=>(k(!0),x),x.disable=()=>(k(!1),x),x.destroy=()=>(k(!1),m(),x),x.resize=()=>(S(),x),x.offset=s=>s==null?r.value:(r=se(s),S(),x),x.onStepEnter=s=>(typeof s=="function"?e.stepEnter=s:Q("onStepEnter requires a function"),x),x.onStepExit=s=>(typeof s=="function"?e.stepExit=s:Q("onStepExit requires a function"),x),x.onStepProgress=s=>(typeof s=="function"?e.stepProgress=s:Q("onStepProgress requires a function"),x),x}function ke(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Se(e){let n=e,t=e;e.length===1&&(n=(o,f)=>e(o)-f,t=nn(e));function r(o,f,u,c){for(u==null&&(u=0),c==null&&(c=o.length);u<c;){const l=u+c>>>1;t(o[l],f)<0?u=l+1:c=l}return u}function i(o,f,u,c){for(u==null&&(u=0),c==null&&(c=o.length);u<c;){const l=u+c>>>1;t(o[l],f)>0?c=l:u=l+1}return u}function a(o,f,u,c){u==null&&(u=0),c==null&&(c=o.length);const l=r(o,f,u,c-1);return l>u&&n(o[l-1],f)>-n(o[l],f)?l-1:l}return{left:r,center:a,right:i}}function nn(e){return(n,t)=>ke(e(n),t)}function tn(e){return e===null?NaN:+e}const rn=Se(ke),on=rn.right;Se(tn).center;var an=on,ue=Math.sqrt(50),ce=Math.sqrt(10),le=Math.sqrt(2);function fn(e,n,t){var r,i=-1,a,o,f;if(n=+n,e=+e,t=+t,e===n&&t>0)return[e];if((r=n<e)&&(a=e,e=n,n=a),(f=Ee(e,n,t))===0||!isFinite(f))return[];if(f>0){let u=Math.round(e/f),c=Math.round(n/f);for(u*f<e&&++u,c*f>n&&--c,o=new Array(a=c-u+1);++i<a;)o[i]=(u+i)*f}else{f=-f;let u=Math.round(e*f),c=Math.round(n*f);for(u/f<e&&++u,c/f>n&&--c,o=new Array(a=c-u+1);++i<a;)o[i]=(u+i)/f}return r&&o.reverse(),o}function Ee(e,n,t){var r=(n-e)/Math.max(0,t),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=ue?10:a>=ce?5:a>=le?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=ue?10:a>=ce?5:a>=le?2:1)}function sn(e,n,t){var r=Math.abs(n-e)/Math.max(0,t),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=ue?i*=10:a>=ce?i*=5:a>=le&&(i*=2),n<e?-i:i}function he(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function $e(e,n){var t=Object.create(e.prototype);for(var r in n)t[r]=n[r];return t}function G(){}var V=.7,ee=1/V,H="\\s*([+-]?\\d+)\\s*",X="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",un=/^#([0-9a-f]{3,8})$/,cn=new RegExp("^rgb\\("+[H,H,H]+"\\)$"),ln=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),hn=new RegExp("^rgba\\("+[H,H,H,X]+"\\)$"),dn=new RegExp("^rgba\\("+[E,E,E,X]+"\\)$"),gn=new RegExp("^hsl\\("+[X,E,E]+"\\)$"),xn=new RegExp("^hsla\\("+[X,E,E,X]+"\\)$"),Ae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};he(G,U,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Pe,formatHex:Pe,formatHsl:mn,formatRgb:Re,toString:Re});function Pe(){return this.rgb().formatHex()}function mn(){return Ie(this).formatHsl()}function Re(){return this.rgb().formatRgb()}function U(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=un.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?Oe(n):t===3?new N(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?ne(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?ne(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=cn.exec(e))?new N(n[1],n[2],n[3],1):(n=ln.exec(e))?new N(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=hn.exec(e))?ne(n[1],n[2],n[3],n[4]):(n=dn.exec(e))?ne(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=gn.exec(e))?je(n[1],n[2]/100,n[3]/100,1):(n=xn.exec(e))?je(n[1],n[2]/100,n[3]/100,n[4]):Ae.hasOwnProperty(e)?Oe(Ae[e]):e==="transparent"?new N(NaN,NaN,NaN,0):null}function Oe(e){return new N(e>>16&255,e>>8&255,e&255,1)}function ne(e,n,t,r){return r<=0&&(e=n=t=NaN),new N(e,n,t,r)}function pn(e){return e instanceof G||(e=U(e)),e?(e=e.rgb(),new N(e.r,e.g,e.b,e.opacity)):new N}function de(e,n,t,r){return arguments.length===1?pn(e):new N(e,n,t,r==null?1:r)}function N(e,n,t,r){this.r=+e,this.g=+n,this.b=+t,this.opacity=+r}he(N,de,$e(G,{brighter:function(e){return e=e==null?ee:Math.pow(ee,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?V:Math.pow(V,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qe,formatHex:qe,formatRgb:ze,toString:ze}));function qe(){return"#"+ge(this.r)+ge(this.g)+ge(this.b)}function ze(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ge(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function je(e,n,t,r){return r<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new $(e,n,t,r)}function Ie(e){if(e instanceof $)return new $(e.h,e.s,e.l,e.opacity);if(e instanceof G||(e=U(e)),!e)return new $;if(e instanceof $)return e;e=e.rgb();var n=e.r/255,t=e.g/255,r=e.b/255,i=Math.min(n,t,r),a=Math.max(n,t,r),o=NaN,f=a-i,u=(a+i)/2;return f?(n===a?o=(t-r)/f+(t<r)*6:t===a?o=(r-n)/f+2:o=(n-t)/f+4,f/=u<.5?a+i:2-a-i,o*=60):f=u>0&&u<1?0:o,new $(o,f,u,e.opacity)}function bn(e,n,t,r){return arguments.length===1?Ie(e):new $(e,n,t,r==null?1:r)}function $(e,n,t,r){this.h=+e,this.s=+n,this.l=+t,this.opacity=+r}he($,bn,$e(G,{brighter:function(e){return e=e==null?ee:Math.pow(ee,e),new $(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?V:Math.pow(V,e),new $(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*n,i=2*t-r;return new N(xe(e>=240?e-240:e+120,i,r),xe(e,i,r),xe(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function xe(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}function yn(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function te(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,r=e.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+e.slice(t+1)]}function C(e){return e=te(Math.abs(e)),e?e[1]:NaN}function wn(e,n){return function(t,r){for(var i=t.length,a=[],o=0,f=e[0],u=0;i>0&&f>0&&(u+f+1>r&&(f=Math.max(1,r-u)),a.push(t.substring(i-=f,i+f)),!((u+=f+1)>r));)f=e[o=(o+1)%e.length];return a.reverse().join(n)}}function Mn(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var vn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function re(e){if(!(n=vn.exec(e)))throw new Error("invalid format: "+e);var n;return new me({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}re.prototype=me.prototype;function me(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}me.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Nn(e){e:for(var n=e.length,t=1,r=-1,i;t<n;++t)switch(e[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+e[t])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Te;function kn(e,n){var t=te(e,n);if(!t)return e+"";var r=t[0],i=t[1],a=i-(Te=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+te(e,Math.max(0,n+a-1))[0]}function He(e,n){var t=te(e,n);if(!t)return e+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Ce={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:yn,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>He(e*100,n),r:He,s:kn,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Fe(e){return e}var Le=Array.prototype.map,_e=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Sn(e){var n=e.grouping===void 0||e.thousands===void 0?Fe:wn(Le.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Fe:Mn(Le.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(h){h=re(h);var m=h.fill,k=h.align,v=h.sign,O=h.symbol,R=h.zero,q=h.width,L=h.comma,A=h.precision,_=h.trim,M=h.type;M==="n"?(L=!0,M="g"):Ce[M]||(A===void 0&&(A=12),_=!0,M="g"),(R||m==="0"&&k==="=")&&(R=!0,m="0",k="=");var Z=O==="$"?t:O==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",ae=O==="$"?r:/[%p]/.test(M)?o:"",B=Ce[M],fe=/[defgprs%]/.test(M);A=A===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function J(d){var S=Z,x=ae,s,p,g;if(M==="c")x=B(d)+x,d="";else{d=+d;var b=d<0||1/d<0;if(d=isNaN(d)?u:B(Math.abs(d),A),_&&(d=Nn(d)),b&&+d==0&&v!=="+"&&(b=!1),S=(b?v==="("?v:f:v==="-"||v==="("?"":v)+S,x=(M==="s"?_e[8+Te/3]:"")+x+(b&&v==="("?")":""),fe){for(s=-1,p=d.length;++s<p;)if(g=d.charCodeAt(s),48>g||g>57){x=(g===46?i+d.slice(s+1):d.slice(s))+x,d=d.slice(0,s);break}}}L&&!R&&(d=n(d,1/0));var y=S.length+d.length+x.length,w=y<q?new Array(q-y+1).join(m):"";switch(L&&R&&(d=n(w+d,w.length?q-x.length:1/0),w=""),k){case"<":d=S+d+x+w;break;case"=":d=S+w+d+x;break;case"^":d=w.slice(0,y=w.length>>1)+S+d+x+w.slice(y);break;default:d=w+S+d+x;break}return a(d)}return J.toString=function(){return h+""},J}function l(h,m){var k=c((h=re(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(C(m)/3)))*3,O=Math.pow(10,-v),R=_e[8+v/3];return function(q){return k(O*q)+R}}return{format:c,formatPrefix:l}}var ie,Be,De;En({thousands:",",grouping:[3],currency:["$",""]});function En(e){return ie=Sn(e),Be=ie.format,De=ie.formatPrefix,ie}function $n(e){return Math.max(0,-C(Math.abs(e)))}function An(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(C(n)/3)))*3-C(Math.abs(e)))}function Pn(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,C(n)-C(e))+1}var pe=e=>()=>e;function Rn(e,n){return function(t){return e+t*n}}function On(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(r){return Math.pow(e+r*n,t)}}function qn(e){return(e=+e)==1?Ye:function(n,t){return t-n?On(n,t,e):pe(isNaN(n)?t:n)}}function Ye(e,n){var t=n-e;return t?Rn(e,t):pe(isNaN(e)?n:e)}var Ge=function e(n){var t=qn(n);function r(i,a){var o=t((i=de(i)).r,(a=de(a)).r),f=t(i.g,a.g),u=t(i.b,a.b),c=Ye(i.opacity,a.opacity);return function(l){return i.r=o(l),i.g=f(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function zn(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,r=n.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=e[i]*(1-a)+n[i]*a;return r}}function jn(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function In(e,n){var t=n?n.length:0,r=e?Math.min(t,e.length):0,i=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)i[o]=we(e[o],n[o]);for(;o<t;++o)a[o]=n[o];return function(f){for(o=0;o<r;++o)a[o]=i[o](f);return a}}function Tn(e,n){var t=new Date;return e=+e,n=+n,function(r){return t.setTime(e*(1-r)+n*r),t}}function oe(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function Hn(e,n){var t={},r={},i;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in e?t[i]=we(e[i],n[i]):r[i]=n[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var be=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ye=new RegExp(be.source,"g");function Cn(e){return function(){return e}}function Fn(e){return function(n){return e(n)+""}}function Ln(e,n){var t=be.lastIndex=ye.lastIndex=0,r,i,a,o=-1,f=[],u=[];for(e=e+"",n=n+"";(r=be.exec(e))&&(i=ye.exec(n));)(a=i.index)>t&&(a=n.slice(t,a),f[o]?f[o]+=a:f[++o]=a),(r=r[0])===(i=i[0])?f[o]?f[o]+=i:f[++o]=i:(f[++o]=null,u.push({i:o,x:oe(r,i)})),t=ye.lastIndex;return t<n.length&&(a=n.slice(t),f[o]?f[o]+=a:f[++o]=a),f.length<2?u[0]?Fn(u[0].x):Cn(n):(n=u.length,function(c){for(var l=0,h;l<n;++l)f[(h=u[l]).i]=h.x(c);return f.join("")})}function we(e,n){var t=typeof n,r;return n==null||t==="boolean"?pe(n):(t==="number"?oe:t==="string"?(r=U(n))?(n=r,Ge):Ln:n instanceof U?Ge:n instanceof Date?Tn:jn(n)?zn:Array.isArray(n)?In:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Hn:oe)(e,n)}function _n(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}function Bn(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function Dn(e){return function(){return e}}function Yn(e){return+e}var Ve=[0,1];function F(e){return e}function Me(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:Dn(isNaN(n)?NaN:.5)}function Gn(e,n){var t;return e>n&&(t=e,e=n,n=t),function(r){return Math.max(e,Math.min(n,r))}}function Vn(e,n,t){var r=e[0],i=e[1],a=n[0],o=n[1];return i<r?(r=Me(i,r),a=t(o,a)):(r=Me(r,i),a=t(a,o)),function(f){return a(r(f))}}function Xn(e,n,t){var r=Math.min(e.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++o<r;)i[o]=Me(e[o],e[o+1]),a[o]=t(n[o],n[o+1]);return function(f){var u=an(e,f,1,r)-1;return a[u](i[u](f))}}function Un(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zn(){var e=Ve,n=Ve,t=we,r,i,a,o=F,f,u,c;function l(){var m=Math.min(e.length,n.length);return o!==F&&(o=Gn(e[0],e[m-1])),f=m>2?Xn:Vn,u=c=null,h}function h(m){return m==null||isNaN(m=+m)?a:(u||(u=f(e.map(r),n,t)))(r(o(m)))}return h.invert=function(m){return o(i((c||(c=f(n,e.map(r),oe)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,Yn),l()):e.slice()},h.range=function(m){return arguments.length?(n=Array.from(m),l()):n.slice()},h.rangeRound=function(m){return n=Array.from(m),t=_n,l()},h.clamp=function(m){return arguments.length?(o=m?!0:F,l()):o!==F},h.interpolate=function(m){return arguments.length?(t=m,l()):t},h.unknown=function(m){return arguments.length?(a=m,h):a},function(m,k){return r=m,i=k,l()}}function Jn(){return Zn()(F,F)}function Kn(e,n,t,r){var i=sn(e,n,t),a;switch(r=re(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(n));return r.precision==null&&!isNaN(a=An(i,o))&&(r.precision=a),De(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Pn(i,Math.max(Math.abs(e),Math.abs(n))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=$n(i))&&(r.precision=a-(r.type==="%")*2);break}}return Be(r)}function Qn(e){var n=e.domain;return e.ticks=function(t){var r=n();return fn(r[0],r[r.length-1],t==null?10:t)},e.tickFormat=function(t,r){var i=n();return Kn(i[0],i[i.length-1],t==null?10:t,r)},e.nice=function(t){t==null&&(t=10);var r=n(),i=0,a=r.length-1,o=r[i],f=r[a],u,c,l=10;for(f<o&&(c=o,o=f,f=c,c=i,i=a,a=c);l-- >0;){if(c=Ee(o,f,t),c===u)return r[i]=o,r[a]=f,n(r);if(c>0)o=Math.floor(o/c)*c,f=Math.ceil(f/c)*c;else if(c<0)o=Math.ceil(o*c)/c,f=Math.floor(f*c)/c;else break;u=c}return e},e}function Wn(){var e=Jn();return e.copy=function(){return Un(e,Wn())},Bn.apply(e,arguments),Qn(e)}export{Bn as i,Wn as l,et as s};
